# Узкие места

## Динамические данные

Хоть nerv зачастую и предоставляет бесплатные абстракции это не распространяется на те 
моменты, когда вы используете функции nerv'а с динамическими данными, то есть такими, 
которые неизвестны на этапе компиляции, неизвестны статически! 

В таких случаях подключается runtime nerv'а, из-за чего вы можете видеть увеличение 
размера скомпилированных программ, а также потери по производительности. Это плата за то, 
что вы переносите проверки с этапа компиляции на время выполнения. 

Говоря конкретнее, если, например, у вас пины неизвестны статически,
основной удар принимает механизм отображения виртуальных пинов на физические. 

И это неразрешимая задача! Поэтому остаться только использовать дополнительные 
ухищрения.

## Развертка циклов 

При флаге оптимизации `-Os` или `-O2` компилятор не разворачивает циклы, даже если те
можно статически посчитать. 

Например:
```c
pin_t pins[] = {1, 2, 3};

for (uint8_t i = 0; i < sizeof(pins); i++)
  init_pin(pins[i], OUTPUT);
```

Будьте осторожны! Это повлечет такой же эффект как и при работе с динамическими данными! Решить это можно уровнем `-O3`, но это уровень агрессивных оптимизаций, 
будьте осторожнее. Но мы рекомендуем в подобных случаях использовать аппаратные интерфейсы,
то есть не полагаться на nerv и компилятор, либо же самостоятельно развернуть цикл. 

## Пользовательских функций 

Если функцию можно выполнить статически, то она должна выполниться статически. 
Не забывайте использовать модификатор `inline`! 
